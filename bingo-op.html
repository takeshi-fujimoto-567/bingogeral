<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Bingo – Operador</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
:root{
  --bg:#F2F2F2;
  --verde:#1F6B3B;
  --cinza:#999;
  --vermelho:#900;
}

*{ box-sizing:border-box }

html,body{
  margin:0;
  height:100%;
  background:var(--bg);
  font-family:Arial,sans-serif;
}

.container{
  padding:16px;
  display:grid;
  grid-template-rows:auto 1fr auto;
  height:100%;
}

h1{
  margin:0 0 12px;
  text-align:center;
  font-size:clamp(26px,4vw,42px);
  text-transform:uppercase;
}

/* ===== GRID ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(10,1fr);
  gap:14px;
}

.cell{
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px 0;
  font-size:clamp(22px,3vw,38px);
  font-weight:900;
  border-radius:14px;
  border:3px solid #CCC;
  background:#FFF;
  color:#000;
  cursor:pointer;
  user-select:none;
}

.cell.called{
  background:var(--verde);
  border-color:var(--verde);
  color:#FFF;
  cursor:default;
}

/* ===== CONTROLES ===== */
.controls{
  margin-top:18px;
  display:flex;
  justify-content:center;
}

button{
  font-size:22px;
  padding:14px 40px;
  border:none;
  border-radius:14px;
  background:var(--vermelho);
  color:#FFF;
  font-weight:700;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="container">

  <h1 id="titulo">Bingo da Oomoto – Operador</h1>

  <div class="grid" id="grid"></div>

  <div class="controls">
    <button onclick="resetar()">Resetar Bingo</button>
  </div>

</div>

<script>
/* ===== FIREBASE CONFIG ===== */
const firebaseConfig = {
  apiKey: "AIzaSyBUhyCxXHxwcGIrA8hSrWoOUB55pt3fdFo",
  authDomain: "bingo-yakisoba-kai.firebaseapp.com",
  databaseURL: "https://bingo-yakisoba-kai-default-rtdb.firebaseio.com",
  projectId: "bingo-yakisoba-kai",
  storageBucket: "bingo-yakisoba-kai.firebasestorage.app",
  messagingSenderId: "202647902902",
  appId: "1:202647902902:web:d434bf96ae6de57de36417"
};

firebase.initializeApp(firebaseConfig);
const ref = firebase.database().ref("bingo_atual");

/* ===== FUNÇÃO LETRA ===== */
function letra(n){
  if(n<=15) return "B";
  if(n<=30) return "I";
  if(n<=45) return "N";
  if(n<=60) return "G";
  return "O";
}

/* ===== GRID 1–75 ===== */
const grid = document.getElementById("grid");

for(let i=1;i<=75;i++){
  const d=document.createElement("div");
  d.className="cell";
  d.innerText=i;

  d.onclick=()=>{
    ref.once("value",snap=>{
      const data=snap.val()||{};
      const sorteados=data.sorteados||{};
      const key=letra(i)+"-"+i;

      if(sorteados[key]) return;

      sorteados[key]=true;

      ref.set({
        titulo: data.titulo || "Bingo da Oomoto",
        ultimo: key,
        sorteados: sorteados
      });
    });
  };

  grid.appendChild(d);
}

/* ===== SINCRONIZAÇÃO ===== */
ref.on("value",snap=>{
  const data=snap.val();
  if(!data) return;

  document.getElementById("titulo").innerText =
    (data.titulo || "Bingo da Oomoto") + " – Operador";

  document.querySelectorAll(".cell").forEach((c,i)=>{
    const key = letra(i+1) + "-" + (i+1);
    c.classList.toggle("called", data.sorteados && data.sorteados[key]);
  });
});

/* ===== RESET ===== */
function resetar(){
  if(!confirm("Resetar o bingo inteiro?")) return;

  ref.set({
    titulo:"Bingo da Oomoto",
    ultimo:"—",
    sorteados:{}
  });
}
</script>

</body>
</html>
