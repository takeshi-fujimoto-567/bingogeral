<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Bingo – TV</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{margin:0;background:#F2F2F2;font-family:Arial}
.layout{display:grid;grid-template-columns:25% 75%;height:100vh}
.destaque{display:flex;align-items:center;justify-content:center;font-size:140px;font-weight:900;color:#1F6B3B}
.painel{padding:16px}
.bingo{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}
.col{background:#fff;border-radius:12px;padding:8px}
.col h2{text-align:center;margin:4px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.cell{padding:12px 0;text-align:center;border:2px solid #DDD;border-radius:8px;font-size:26px;color:#999;cursor:pointer}
.cell.called{background:#1F6B3B;color:#fff;border-color:#1F6B3B}
button{margin-top:12px;padding:10px 28px;font-size:18px;border:none;border-radius:10px;background:#900;color:#fff}
</style>
</head>

<body>

<div class="layout">
  <div class="destaque" id="ultimo">—</div>
  <div class="painel">
    <h1 id="titulo">Bingo da Oomoto</h1>
    <div class="bingo" id="bingo"></div>
    <button onclick="resetar()">Resetar Bingo</button>
  </div>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBUhyCxXHxwcGIrA8hSrWoOUB55pt3fdFo",
  authDomain: "bingo-yakisoba-kai.firebaseapp.com",
  databaseURL: "https://bingo-yakisoba-kai-default-rtdb.firebaseio.com",
  projectId: "bingo-yakisoba-kai",
  storageBucket: "bingo-yakisoba-kai.firebasestorage.app",
  messagingSenderId: "202647902902",
  appId: "1:202647902902:web:d434bf96ae6de57de36417"
};

firebase.initializeApp(firebaseConfig);
const ref = firebase.database().ref("bingo_atual");

const grupos=[
  {l:"B",i:1},{l:"I",i:16},{l:"N",i:31},{l:"G",i:46},{l:"O",i:61}
];

const bingo=document.getElementById("bingo");

grupos.forEach(g=>{
  const col=document.createElement("div");
  col.className="col";
  col.innerHTML=`<h2>${g.l}</h2>`;
  const grid=document.createElement("div");
  grid.className="grid";

  for(let x=0;x<15;x++){
    const n=g.i+x;
    const c=document.createElement("div");
    c.className="cell";
    c.innerText=n;
    c.dataset.key=`${g.l}-${n}`;

    c.onclick=()=>marcar(c.dataset.key);
    grid.appendChild(c);
  }

  col.appendChild(grid);
  bingo.appendChild(col);
});

function marcar(key){
  ref.transaction(data=>{
    if(!data) data={titulo:"Bingo da Oomoto",ultimo:"—",sorteados:{}};
    if(data.sorteados[key]) return;
    data.sorteados[key]=true;
    data.ultimo=key;
    return data;
  });
}

function resetar(){
  if(!confirm("Resetar o bingo?")) return;
  ref.set({titulo:"Bingo da Oomoto",ultimo:"—",sorteados:{}});
}

ref.on("value",snap=>{
  const d=snap.val();
  if(!d) return;
  titulo.innerText=d.titulo;
  ultimo.innerText=d.ultimo;
  document.querySelectorAll(".cell").forEach(c=>{
    c.classList.toggle("called",d.sorteados && d.sorteados[c.dataset.key]);
  });
});
</script>

</body>
</html>
