<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Bingo 75 – Painel</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
:root{
    --bg:#F2F2F2;
    --panel:#FFFFFF;
    --grid-text:#9A9A9A;
    --verde:#1F6B3B;
    --branco:#FFFFFF;
}

*{ box-sizing:border-box }

html,body{
    margin:0;
    height:100%;
    background:var(--bg);
    font-family:Arial,sans-serif;
    overflow:hidden;
}

/* LAYOUT */
.layout{
    display:grid;
    grid-template-columns:25% 75%;
    height:100vh;
}

/* DESTAQUE */
.last-area{
    display:flex;
    align-items:center;
    justify-content:center;
    border-right:4px solid #DDD;
}

#last{
    font-size:clamp(96px,10vw,180px);
    font-weight:900;
    color:var(--verde);
}

/* PAINEL */
.board-area{
    padding:16px;
    display:flex;
    flex-direction:column;
    align-items:center;
}

h1{
    margin:4px 0 12px;
    font-size:clamp(32px,4vw,56px);
    letter-spacing:0.15em;
    text-transform:uppercase;
    color:#333;
}

/* BINGO */
.bingo{
    display:grid;
    grid-template-columns:repeat(5,1fr);
    gap:24px;
    width:100%;
    max-width:1200px;
    flex-grow:1;
}

.column{
    background:var(--panel);
    border-radius:18px;
    padding:12px;
    display:flex;
    flex-direction:column;
    border:2px solid #DDD;
}

.column h2{
    margin:4px 0 12px;
    font-size:clamp(28px,3vw,44px);
    text-align:center;
    color:#555;
}

.grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:14px;
    flex-grow:1;
}

.cell{
    background:transparent;
    border:2px solid #DDD;
    border-radius:12px;
    padding:18px 0;
    font-size:clamp(22px,2.4vw,36px);
    text-align:center;
    color:var(--grid-text);
    cursor:pointer;
    user-select:none;
}

.cell.center{
    grid-column:span 2;
    width:85%;
    justify-self:center;
}

.cell.called{
    background:var(--verde);
    border-color:var(--verde);
    color:var(--branco);
    font-weight:900;
    cursor:default;
}

.controls{
    margin-top:10px;
}

button{
    font-size:20px;
    padding:10px 28px;
    border:none;
    border-radius:10px;
    background:var(--verde);
    color:#fff;
    cursor:pointer;
}

button:hover{ opacity:0.9 }

@media (max-width:900px){
    .layout{ grid-template-columns:100%; }
    .last-area{
        height:22vh;
        border-right:none;
        border-bottom:4px solid #DDD;
    }
}
</style>
</head>

<body>

<div class="layout">

    <div class="last-area">
        <div id="last">—</div>
    </div>

    <div class="board-area">
        <h1>Bingo da Oomoto</h1>
        <div class="bingo" id="bingo"></div>
        <div class="controls">
            <button onclick="resetBingo()">Resetar Bingo</button>
        </div>
    </div>

</div>

<script>
/* ===== FIREBASE CONFIG (SEU APP DO BINGO) ===== */
const firebaseConfig = {
  apiKey: "AIzaSyBUhyCxXHxwcGIrA8hSrWoOUB55pt3fdFo",
  authDomain: "bingo-yakisoba-kai.firebaseapp.com",
  databaseURL: "https://bingo-yakisoba-kai-default-rtdb.firebaseio.com",
  projectId: "bingo-yakisoba-kai",
  storageBucket: "bingo-yakisoba-kai.firebasestorage.app",
  messagingSenderId: "202647902902",
  appId: "1:202647902902:web:d434bf96ae6de57de36417"
};

firebase.initializeApp(firebaseConfig);
const ref = firebase.database().ref("bingo75");

/* ===== ELEMENTOS ===== */
const bingo = document.getElementById("bingo");
const last  = document.getElementById("last");

/* ===== GRUPOS ===== */
const grupos = [
    { letra:"B", inicio:1 },
    { letra:"I", inicio:16 },
    { letra:"N", inicio:31 },
    { letra:"G", inicio:46 },
    { letra:"O", inicio:61 }
];

/* ===== MONTAR TABELA ===== */
grupos.forEach(g=>{
    const col=document.createElement("div");
    col.className="column";

    const h=document.createElement("h2");
    h.innerText=g.letra;
    col.appendChild(h);

    const grid=document.createElement("div");
    grid.className="grid";

    for(let i=0;i<15;i++){
        const num=g.inicio+i;
        const cell=document.createElement("div");
        cell.className="cell";
        cell.innerText=num;

        const key = g.letra + "-" + num;
        cell.dataset.key = key;

        if(i===14) cell.classList.add("center");

        cell.onclick=()=>{
            ref.once("value",snap=>{
                const data=snap.val()||{};
                const sorteados=data.sorteados||{};
                if(sorteados[key]) return;

                sorteados[key]=true;
                ref.set({
                    ultimo:key,
                    sorteados:sorteados
                });
            });
        };

        grid.appendChild(cell);
    }

    col.appendChild(grid);
    bingo.appendChild(col);
});

/* ===== SINCRONIZAÇÃO ===== */
ref.on("value",snap=>{
    const data=snap.val();
    if(!data) return;

    last.innerText = data.ultimo || "—";

    document.querySelectorAll(".cell").forEach(cell=>{
        if(data.sorteados && data.sorteados[cell.dataset.key]){
            cell.classList.add("called");
        }
    });
});

/* ===== RESET ===== */
function resetBingo(){
    if(!confirm("Resetar o bingo?")) return;
    ref.set({ ultimo:"—", sorteados:{} });
}
</script>

</body>
</html>
